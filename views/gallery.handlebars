<!DOCTYPE HTML>
<!--
	Spectral by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
	{{> html_head}}


    <!--for pagination-->
    <!--<script type="text/javascript" src="/js/jquery-1.3.2.js"></script>-->
    <!--<script type="text/javascript" src="/js/jquery.paginate.js"></script>-->

</head>

<body>

<!-- Page Wrapper -->
<!--<div id="page-wrapper">-->

	<!-- Header -->
	{{> header}}

	<!-- Main -->
	
	<!--<div class="input-group search-box">-->
		<!--<input type="text" class="form-control" placeholder="Search for journals" aria-describedby="basic-addon1">-->
		<!--<span class="input-group-btn">-->
			<!--<button id="search_btn" class="btn btn-default" type="button">-->
				<!--<span class="glyphicon glyphicon-search"></span>-->
			<!--</button>-->
		<!--</span>-->
	<!--</div>-->

	<!--search bar-->
	<div class="container">

        <h3> Gallery </h3>
        <p> Explore the world with other people's journals!</p>

		<div class="row">
			<div class="" style="padding:0em">
				<div id="custom-search-input">
					<div class="input-group col-md-12">
                        <input id="search_journals" type="text" class="form-control input-lg" placeholder="type journal name" />
					<span class="input-group-btn">
						<a href='/' id="journal_search_btn" class="btn btn-info btn-lg">
							<i class="fa fa-search"></i>
						</a>
					</span>
					</div>
				</div>
			</div>
		</div>
	</div>


	<div class="container">
		<div class="row">

			{{#each journals}}
				<div class="col-xs-4 col-sm-2 col-md-2 col-lg-2 col-xl-1 journals-container" id="p{{@index}}">
					<a href="/journal/{{_id}}" class="thumbnail journal">
						<img src="{{coverImage}}" alt="{{title}}">
						<h5>{{title}}</h5>
					</a>
				</div>
			{{/each}}

		</div>

        <!--<div id="pagination"> </div>-->
	</div>

	<!-- Footer -->
	<!--<footer id="footer">-->
		<!--<ul class="icons">-->
			<!--<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>-->
			<!--<li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>-->
			<!--<li><a href="#" class="icon fa-instagram"><span class="label">Instagram</span></a></li>-->
			<!--<li><a href="#" class="icon fa-dribbble"><span class="label">Dribbble</span></a></li>-->
			<!--<li><a href="#" class="icon fa-envelope-o"><span class="label">Email</span></a></li>-->
		<!--</ul>-->
		<!--<ul class="copyright">-->
			<!--<li>&copy; Untitled</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>-->
		<!--</ul>-->
	<!--</footer>-->

    <!--pagination test-->


<!--</div>-->

{{> loader}}

<script>

	$(document).ajaxStart(function(){
		console.log("loader triggered!");
		$("#loader").show();
	});
	$(document).ajaxComplete(function(){
		console.log("loader hided!");
		$("#loader").hide();
	});

	$(document).on('ready', function() {

//        console.log("document ready");
//
//        for(var i=1; i<=6; i++){
//            $('#p'+ i).addClass('_current').show();
//        }
//
//        $('#pagination').paginate({
//            count 		: 10,
//            start 		: 1,
//            display     : 6,
//            border					: false,
//            text_color  			: '#79B5E3',
//            background_color    	: 'none',
//            text_hover_color  		: '#2573AF',
//            background_hover_color	: 'none',
//            images		: false,
//            mouse		: 'press',
//            onChange    : function(page){
//                $('._current').removeClass('_current').hide();
//
//                console.log("next page is:" + page);
//                for(var i=1; i<=6; i++){
//                    var num = page*6 + i;
//                    $('#p'+ num).addClass('_current').show();
//                }
//
//            }
//        });

		$('#back_btn').attr('href', '/myjournal');

		$('#journal_search_btn').click(function(e){
			e.preventDefault();
			console.log('search button clicked');

			var text = $('#search_journals').val();

			window.location.replace('/gallery/' + text);
		});
		
		$('.journal img').each(function(){
			h = $(this).height();
			w = $(this).width();

			console.log(h, w);
			new_h = 120;
			new_w = 120 * w / h;
			console.log(new_h, new_w);
			$(this).height(new_h);
			$(this).width(new_w);
			
		});

	});
</script>

</body>
</html>